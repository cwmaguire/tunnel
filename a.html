<!DOCTYPE html>
<html>

    <head>
        <script language="JavaScript">
            function chain(times, fn, init){
                var newDiv = document.createElement("div");
                newDiv.innerText = init;
                document.body.appendChild(newDiv);
                //window.alert("Iterating!");
                if(times > 0){
                    chain(times - 1, fn, fn.call(null, init));
                }
            }

            function onLoad(){
                chain(20, draw, [20, 20, "x"]);
            }

            function draw(args){
                var x1 = args[0];
                var y1 = args[1];
                var xOrY = args[2];
                var x2 = x1;
                var y2 = y1;

                if(xOrY == "x"){
                    x2 = x1 + 10;
                    xOrY = "y";
                }else{
                    y2 = y1 + 10;
                    xOrY = "x";
                }

                var canvas1 = document.getElementById("canvas1");
                var context1 = canvas1.getContext("2d");
                context1.fillStyle = "#FF0000";
                context1.beginPath();
                context1.moveTo(x1, y1);
                context1.lineTo(x2, y2);
                context1.stroke();
                context1.closePath();
                return [x2, y2, xOrY];
            }
        </script>
    </head>
    <body onload="onLoad()">
        <canvas id="canvas1" width="400" height="400" style="border:1px solid black;"></canvas>
    </body>
</html>